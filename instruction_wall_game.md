# Инструкция для Claude: реализовать веб-игру «Стена» (Plinko + Викторина)

## 1) Краткая суть игры
- Перед игроком «стена» с штырьками (галтоновская доска). Сверху — **5 или 7 входов**. Снизу — **5 или 7 выходов** (ячейки с призами).
- Игрок выбирает **вход**, нажимает **Бросить** → **шар** падает сквозь сетку и попадает в один из выходов.
- Каждому выходу соответствует **сумма баллов**.
- После приземления показывается **вопрос**. Верный ответ → прибавить баллы, неверный → вычесть.
- Игра состоит из **нескольких туров** и финального раунда «ва-банк».

## 2) Механика и физика
- Физика Matter.js (или Phaser 3). Шар падает естественно, без манипуляций, с детерминизмом по seed.
- Входы сверху кликабельные. Выходы снизу показывают очки.

## 3) Раунды и логика
- Каждый раунд: входы, выходы с баллами, пул вопросов по тегу.
- Финальный вопрос — ставка «ва-банк» (всё или процент).

## 4) Структура вопросов (JSON)
- Поддержка типов single / true-false.
- Фильтрация по тегу, без повторов.

Пример:
```json
[
  {
    "id": "q1",
    "tag": "general",
    "type": "single",
    "text": "Какой цвет получают при смешении синего и жёлтого?",
    "options": ["Оранжевый", "Зелёный", "Фиолетовый", "Коричневый"],
    "correctIndex": 1
  }
]
```

## 5) UI/UX
- Экран игры: счёт, раунды, стена, входы/выходы, вопросы.
- Экран итогов: сумма очков.

## 6) Конфигурация
- Выходы с очками задаются в конфиге (центр дороже, или случайное распределение).

Пример:
```ts
exits: [
  { id: "e1", points: 100 },
  { id: "e2", points: 200 },
  { id: "e3", points: 300 },
  { id: "e4", points: 400 }, // центр
  { id: "e5", points: 300 },
  { id: "e6", points: 200 },
  { id: "e7", points: 100 }
]
```

## 7) Архитектура
- `physics/board.ts`, `ball.ts` — физика.
- `game/state.ts` — состояния игры.
- `data/questions.ts` — вопросы.
- `ui/*` — интерфейс.

## 8) Алгоритмы
Игровой цикл:
```
Игрок выбирает вход → шар падает → фиксируем выход → задаём вопрос → пересчитываем счёт.
```

Финальный раунд «ва-банк»:
```
ставка = score (или часть)
верный ответ → score += ставка
неверный → score -= ставка
```

## 9) Тесты
- Проверка начислений, логики ва-банк, повторения падений по seed.

## 10) Доступность
- Контрастные зоны, управление с клавиатуры, поддержка prefers-reduced-motion.

## 11) Сборка
- **Vite + React + TypeScript + Matter.js**
- Скрипты: `dev`, `build`, `preview`, `test`

## 12) Что сдать
- Репозиторий с кодом.
- README с описанием.
- Демо-сборку (Netlify/Vercel).
